

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Adding a new optimization problem &mdash; PyGMO 1.1.7dev documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'../',
        VERSION:'1.1.7dev',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
    <script type="text/javascript">
        jQuery(function () {
            SphinxRtdTheme.StickyNav.enable();
        });
    </script>
  

  
    <link rel="top" title="PyGMO 1.1.7dev documentation" href="../index.html"/>
        <link rel="up" title="Adding new problems and algorithms to PyGMO" href="adding_problems_and_algorithms_to_PyGMO.html"/>
        <link rel="next" title="Adding a new stochastic optimization problem" href="adding_a_new_stochastic_optimization_problem.html"/>
        <link rel="prev" title="Adding new problems and algorithms to PyGMO" href="adding_problems_and_algorithms_to_PyGMO.html"/> 

  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="fa fa-home"> PyGMO</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Install PyGMO</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../install.html#preparing-your-system-to-compile-pygmo">Preparing your system to compile PyGMO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#download-pygmo-code">Download PyGMO code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#compiling-and-installing-under-unix">Compiling and Installing under Unix</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#compiling-and-installing-under-windows">Compiling and Installing under Windows</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick Start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#on-one-cpu">On one CPU</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#on-many-cpus">On many CPUs ...</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#and-migrating-solutions">... and migrating solutions ...</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#and-between-different-algorithms">... and between different algorithms ...</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Tutorials</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="adding_problems_and_algorithms_to_PyGMO.html">Adding new problems and algorithms to PyGMO</a></li>
<li class="toctree-l2"><a class="reference internal" href="meta_problems_meta_algorithms.html">Meta-problems</a></li>
<li class="toctree-l2"><a class="reference internal" href="multi_objective_optimization_with_PyGMO.html">Multi Objective Optimization with PyGMO</a></li>
<li class="toctree-l2"><a class="reference internal" href="hypervolumes_in_PyGMO.html">Hypervolumes with PyGMO</a></li>
<li class="toctree-l2"><a class="reference internal" href="dealing_with_constraints_in_PyGMO.html">Dealing with constraints in PyGMO</a></li>
<li class="toctree-l2"><a class="reference internal" href="racing.html">Racing in PyGMO</a></li>
<li class="toctree-l2"><a class="reference internal" href="tsp.html">Traveling Salesman Problems with PyGMO</a></li>
<li class="toctree-l2"><a class="reference internal" href="landscape_analysis_with_DrPyGMO.html">Landscape Analysis using Dr. PyGMO</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../examples/example1.html">A study on Mixing Variants of Differential Evolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/example2.html">Monitoring the Information Flow in a large archipelago</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/example3.html">Testing Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/example4.html">Multi-objective optimization in the asynchronous island model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/example5.html">Designing and optimizing interplanetary trajectories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/example6.html">Participating to the CEC2013 Competition (v 1.1.5)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/example7.html">Travelling Salesman Problem for Active Space Debris Removal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/local_optimization.html">Third-party Non-linear optimizers in PyGMO</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../documentation/index.html">User Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../documentation/individual.html">Individual and Champion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation/population.html">Population</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation/migration.html">Migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation/topology.html">Topology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation/island.html">Island and Archipelago</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation/algorithms.html">Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation/problems.html">Problems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation/hypervolume.html">Hypervolume</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation/racing.html">Racing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation/analysis.html">Dr. PyGMO - Analysis Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="http://esa.github.io/pagmo/">PaGMO API</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">PyGMO</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Tutorials</a> &raquo;</li>
      
          <li><a href="adding_problems_and_algorithms_to_PyGMO.html">Adding new problems and algorithms to PyGMO</a> &raquo;</li>
      
    <li>Adding a new optimization problem</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/tutorials/adding_a_new_optimization_problem.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="adding-a-new-optimization-problem">
<h1>Adding a new optimization problem<a class="headerlink" href="#adding-a-new-optimization-problem" title="Permalink to this headline">¶</a></h1>
<p>In this Tutorial we will learn how to code simple optimization problems
(continuous, single objective, unconstrained), so that PyGMO can then
apply all of its algorithmic power to solve it. In a nutshell, we will
write a class deriving from <strong>PyGMO.problem.base</strong> and reimplement some
of its ‘virtual’ methods.</p>
<div class="section" id="simple-single-objective-problem">
<h2>Simple single objective problem<a class="headerlink" href="#simple-single-objective-problem" title="Permalink to this headline">¶</a></h2>
<p>Let us start with defining one of the classic textbook examples of an
optimization problem.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">PyGMO.problem</span> <span class="kn">import</span> <span class="n">base</span>

<span class="k">class</span> <span class="nc">my_problem</span><span class="p">(</span><span class="n">base</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    De Jong (sphere) function implemented purely in Python.</span>

<span class="sd">    USAGE: my_problem(dim=10)</span>

<span class="sd">    * dim problem dimension</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
        <span class="c"># First we call the constructor of the base class telling PyGMO</span>
        <span class="c"># what kind of problem to expect (&#39;dim&#39; dimensions, 1 objective, 0 contraints etc.)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">my_problem</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">dim</span><span class="p">)</span>

        <span class="c"># We set the problem bounds (in this case equal for all components)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_bounds</span><span class="p">(</span><span class="o">-</span><span class="mf">5.12</span><span class="p">,</span> <span class="mf">5.12</span><span class="p">)</span>

    <span class="c"># Reimplement the virtual method that defines the objective function.</span>
    <span class="k">def</span> <span class="nf">_objfun_impl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>

        <span class="c"># Compute the sphere function</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dimension</span><span class="p">)])</span>

        <span class="c"># Note that we return a tuple with one element only. In PyGMO the objective functions</span>
        <span class="c"># return tuples so that multi-objective optimization is also possible.</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="p">)</span>

    <span class="c"># Finally we also reimplement a virtual method that adds some output to the __repr__ method</span>
    <span class="k">def</span> <span class="nf">human_readable_extra</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&quot;</span><span class="se">\n\t</span><span class="s"> Problem dimension: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__dim</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that by default PyGMO will assume one wants to minimize the
objective function. In the second part of this tutorial we will also see
how it is possible to change this default behaviour.</p>
<p>To solve our problem we will use Artificial Bee Colony algorithm with 20
individuals.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">PyGMO</span> <span class="kn">import</span> <span class="n">algorithm</span><span class="p">,</span> <span class="n">island</span>

<span class="n">prob</span> <span class="o">=</span> <span class="n">my_problem</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>  <span class="c"># Create a 10-dimensional problem</span>
<span class="n">algo</span> <span class="o">=</span> <span class="n">algorithm</span><span class="o">.</span><span class="n">bee_colony</span><span class="p">(</span><span class="n">gen</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>  <span class="c"># 500 generations of bee_colony algorithm</span>
<span class="n">isl</span> <span class="o">=</span> <span class="n">island</span><span class="p">(</span><span class="n">algo</span><span class="p">,</span> <span class="n">prob</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>  <span class="c"># Instantiate population with 20 individuals</span>
<span class="n">isl</span><span class="o">.</span><span class="n">evolve</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c"># Evolve the island once</span>
<span class="n">isl</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">isl</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">champion</span><span class="o">.</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">(</span><span class="mf">5.800103096468531e-25</span><span class="p">,)</span>
</pre></div>
</div>
<p>And we are done! Objective value in the order of <span class="math">\(10^{-25}\)</span>, no
big deal for a sphere problem.</p>
</div>
<div class="section" id="maximization-problem">
<h2>Maximization problem<a class="headerlink" href="#maximization-problem" title="Permalink to this headline">¶</a></h2>
<p>Let’s consider now a maximization problem. To solve such a problem, two
possibilities are available to the PaGMO/PyGMO user. The first one is to
code the original problem as a minimization problem by premultiplying
the objective function by <span class="math">\(-1\)</span> (a technique wich is often used and
requires no particular effort). If such a method is used, the final
fitness value obtained with PyGMO has to be multiplied by <span class="math">\(-1\)</span> to
get back to the correct value.</p>
<p>A second method, more elegant and most of all serving the purpose to
show the use of another virtual method which can be reimplemented in
python objects deriving from base, is to override the function that
compares two fitness vectors. This function is used by all pagmo
algorithms to compare performances of individuals. By default, this
function compares the fitness <span class="math">\(f_1\)</span> to a fitness <span class="math">\(f_2\)</span> and
returns true if <span class="math">\(f_1\)</span> dominates <span class="math">\(f_2\)</span> (which is single
objective optimization correspond to minimization). Let us see how...</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">my_problem_max</span><span class="p">(</span><span class="n">base</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analytical function to maximize.</span>

<span class="sd">    USAGE: my_problem_max()</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">my_problem_max</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_bounds</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

        <span class="c"># We provide a list of the best known solutions to the problem</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">best_x</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">],</span> <span class="p">]</span>

    <span class="c"># Reimplement the virtual method that defines the objective function</span>
    <span class="k">def</span> <span class="nf">_objfun_impl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">-</span> <span class="mf">1.0</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="p">)</span>

    <span class="c"># Reimplement the virtual method that compares fitnesses</span>
    <span class="k">def</span> <span class="nf">_compare_fitness_impl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">f1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">f2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="c"># Add some output to __repr__</span>
    <span class="k">def</span> <span class="nf">human_readable_extra</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&quot;</span><span class="se">\n\t</span><span class="s">Maximization problem&quot;</span>
</pre></div>
</div>
<p>Additionally in the constructor we provide a list of all known global
minima (we will use those later for testing). The list of corresponding
objective function values will be then computed and accessible through
<strong>best_f</strong> of the problem&#8217;s instance.</p>
<p>As before, we use our favorite optimization algorithm:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span>

<span class="n">prob</span> <span class="o">=</span> <span class="n">my_problem_max</span><span class="p">()</span>
<span class="n">algo</span> <span class="o">=</span> <span class="n">algorithm</span><span class="o">.</span><span class="n">de</span><span class="p">(</span><span class="n">gen</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">isl</span> <span class="o">=</span> <span class="n">island</span><span class="p">(</span><span class="n">algo</span><span class="p">,</span> <span class="n">prob</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="n">isl</span><span class="o">.</span><span class="n">evolve</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">isl</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="s">&quot;Best individual:&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">isl</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">champion</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">&quot;Comparison of the best found fitness with the best known fitness:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">best_fitness</span> <span class="ow">in</span> <span class="n">prob</span><span class="o">.</span><span class="n">best_f</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">best_fitness</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">isl</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">champion</span><span class="o">.</span><span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="k">print</span><span class="p">(</span><span class="s">&quot;L2 distance to the best decision vector:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">best_decision</span> <span class="ow">in</span> <span class="n">prob</span><span class="o">.</span><span class="n">best_x</span><span class="p">:</span>
    <span class="n">l2_norm</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">best_decision</span><span class="p">)):</span>
        <span class="n">l2_norm</span> <span class="o">+=</span>  <span class="p">(</span><span class="n">best_decision</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">-</span> <span class="n">isl</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">champion</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">n</span><span class="p">])</span> <span class="o">**</span> <span class="mi">2</span>
    <span class="n">l2_norm</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">l2_norm</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">l2_norm</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>Best individual:
    Decision vector:        [1.0000035381312899, -1.000007979785372]
    Constraints vector:     []
    Fitness vector:         [-1.0000000000941514]

Comparison of the best found fitness with the best known fitness:
9.41513533803e-11
L2 distance to the best decision vector:
8.72899465051e-06
</pre></div>
</div>
<p>Note here that we used the <strong>best_f</strong> and <strong>best_x</strong> methods which
return the best known fitness and decision vectors. The <strong>best_f</strong>
vector is automatically available as we defined <strong>best_x</strong> in the
problem. With these vectors, we can have an idea of the optimizer
performances. The result of this optimization should be in order of
<span class="math">\(10^{-11}\)</span> for the comparison with the best fitness and
<span class="math">\(10^{-6}\)</span> for the distance to the best decision vector.</p>
</div>
<div class="section" id="multi-objective-problem">
<h2>Multi-objective problem<a class="headerlink" href="#multi-objective-problem" title="Permalink to this headline">¶</a></h2>
<p>As hinted before, users can also define their own multi-objective
problem. In that case we need to overload the the base constructor with
third argument stating the desired objective function dimension and
return a tuple or a list with more than one element in the objective
function implementation (both dimensions must agree).</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">my_mo_problem</span><span class="p">(</span><span class="n">base</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A multi-objective problem.</span>
<span class="sd">    (This is actually a Python implementation of 2-dimensional ZDT-1 problem)</span>

<span class="sd">    USAGE: my_mo_problem()</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
        <span class="c"># We call the base constructor as &#39;dim&#39; dimensional problem, with 0 integer parts and 2 objectives.</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">my_mo_problem</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">dim</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_bounds</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>

    <span class="c"># Reimplement the virtual method that defines the objective function</span>
    <span class="k">def</span> <span class="nf">_objfun_impl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="n">f0</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">g</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">+</span> <span class="mf">4.5</span> <span class="o">*</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">f1</span> <span class="o">=</span> <span class="n">g</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">f0</span> <span class="o">/</span> <span class="n">g</span><span class="p">))</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">f0</span><span class="p">,</span> <span class="n">f1</span><span class="p">,</span> <span class="p">)</span>

    <span class="c"># Add some output to __repr__</span>
    <span class="k">def</span> <span class="nf">human_readable_extra</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&quot;</span><span class="se">\n\t</span><span class="s">Multi-Objective problem&quot;</span>
</pre></div>
</div>
<p>We instantiate our problem as before, but this time we use one of the
multi-objective algorithms available in PaGMO:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">PyGMO</span> <span class="kn">import</span> <span class="n">population</span>

<span class="n">prob</span> <span class="o">=</span> <span class="n">my_mo_problem</span><span class="p">()</span>
<span class="n">algo</span> <span class="o">=</span> <span class="n">algorithm</span><span class="o">.</span><span class="n">sms_emoa</span><span class="p">(</span><span class="n">gen</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>  <span class="c"># 2000 generations of SMS-EMOA should solve it</span>
<span class="n">pop</span> <span class="o">=</span> <span class="n">population</span><span class="p">(</span><span class="n">prob</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="n">pop</span> <span class="o">=</span> <span class="n">algo</span><span class="o">.</span><span class="n">evolve</span><span class="p">(</span><span class="n">pop</span><span class="p">)</span>
</pre></div>
</div>
<p>Since in the Multi-Objective world the idea of a single &#8216;champion&#8217;
solution is not very well defined, we plot the Pareto front of the whole
population, i.e., the two objectives <span class="math">\(f_i^{(1)}\)</span> and
<span class="math">\(f_i^{(2)}\)</span> of each individual <span class="math">\(i \in 1,\ldots,30\)</span>.</p>
<div class="code python highlight-python"><div class="highlight"><pre>%matplotlib inline
import matplotlib.pyplot as plt
import numpy as np

# Fold each objectives into vectors and print the Pareto front
F = np.array([ind.cur_f for ind in pop]).T
plt.scatter(F[0], F[1])
plt.xlabel(&quot;$f^{(1)}$&quot;)
plt.ylabel(&quot;$f^{(2)}$&quot;)
plt.show()
</pre></div>
</div>
<img alt="../_images/adding_a_new_optimization_problem_20_0.png" src="../_images/adding_a_new_optimization_problem_20_0.png" />
<p>NOTE1: This problems of tutorial are implemented in PyGMO under the name
<strong>PyGMO.problem.py_example</strong> and <strong>PyGMO.problem.py_example_max</strong></p>
<p>NOTE2: When evolve is called from an island, the process is forked and
transferred to another python or ipython instance. As a consequence,
when writing your <strong>*obj*fun_impl</strong> you cannot use stuff like
matplotlib to make interactive plots and alike. If you need, during
development, to have this kind of support, use the algorithm evolve
method (see the optimization of the Multi-Objective problemabove)</p>
<p>NOTE3: If performance is your goal, you should implement your problem in
C++, and then expose it into Python.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="adding_a_new_stochastic_optimization_problem.html" class="btn btn-neutral float-right" title="Adding a new stochastic optimization problem"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="adding_problems_and_algorithms_to_PyGMO.html" class="btn btn-neutral" title="Adding new problems and algorithms to PyGMO"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Dario Izzo and Francesco Biscani.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

</body>
</html>